<VirtualHost *:80>
	ServerAdmin webmaster@localhost
	ServerName tracker.publishwhatyoufund.org
	DocumentRoot /home/tracker/att-website/htdocs

        RewriteEngine On
        RewriteRule ^/organisations(.*)$ http://tracker.publishwhatyoufund.org/plan/organisations$1
        RewriteRule ^/fields(.*)$ http://tracker.publishwhatyoufund.org/plan/fields$1
        RewriteRule ^/timeline(.*)$ http://tracker.publishwhatyoufund.org/plan/timeline$1
        RewriteRule ^/about(.*)$ http://tracker.publishwhatyoufund.org/plan/about$1
        RewriteRule ^/api(.*)$ http://tracker.publishwhatyoufund.org/plan/api$1
        RewriteRule ^/api(.*)$ http://tracker.publishwhatyoufund.org/plan/api$1
        RewriteRule ^/static(.*)$ http://tracker.publishwhatyoufund.org/plan/static$1

	Alias /publish/static /home/tracker/IATI-Data-Quality/iatidataquality/static

	WSGIDaemonProcess dq user=tracker group=tracker threads=5
	WSGIScriptAlias /publish /home/tracker/att-website/conf/publish/dq.wsgi

  WSGIDaemonProcess impsched user=tracker group=tracker threads=5
  WSGIScriptAlias /plan /home/tracker/att-website/conf/plan/impsched.wsgi

  WSGIDaemonProcess iatiupdates user=tracker group=tracker threads=5
  WSGIScriptAlias /iatiupdates /home/tracker/att-website/conf/iatiupdates/iatiupdates.wsgi


    <Directory /home/tracker/att-website/htdocs>
	Options FollowSymLinks MultiViews
	AllowOverride All
	Require all granted
    </Directory>
    <Directory /home/tracker/IATI-Data-Quality/iatidataquality/static>
        Options FollowSymLinks MultiViews
        Require all granted
    </Directory>
    <Directory /home/tracker/IATI-Implementation-Schedules/impschedules/static">
        Options FollowSymLinks MultiViews
        Require all granted
    </Directory>
    <Directory /home/tracker/IATI-Updates/iatiupdates/static">
        Options FollowSymLinks MultiViews
        Require all granted
    </Directory>

    <Directory /home/tracker/att-website/conf>
        Options FollowSymLinks MultiViews
        Order deny,allow
        Allow from all
        Require all granted
    </Directory>
    <Directory /home/tracker/att-website/conf/publish>
        Options FollowSymLinks MultiViews
        WSGIProcessGroup dq
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
	Require all granted
	<Files dq.wsgi>
	Order deny,allow
	Allow from all
	Require all granted
	</Files>
    </Directory>
    <Directory /home/tracker/att-website/conf/plan>
        Options FollowSymLinks MultiViews
        WSGIProcessGroup impsched   
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
        Require all granted
        <Files impsched.wsgi>
        Order deny,allow
        Allow from all
        Require all granted
        </Files>
    </Directory>
    <Directory /home/tracker/att-website/conf/iatiupdates>
        Options FollowSymLinks MultiViews
        WSGIProcessGroup iatiupdates
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
        Require all granted
        <Files iatiupdates.wsgi>
        Order deny,allow
        Allow from all
        Require all granted
        </Files>
    </Directory>

</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
